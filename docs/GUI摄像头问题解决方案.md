# GUIæ‘„åƒå¤´é—®é¢˜è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆå½“å‰GUIå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. **æ‘„åƒå¤´ç•Œé¢å˜é»‘** - æ‘„åƒå¤´å¯åŠ¨åä¸€ä¼šå„¿ç•Œé¢å°±å˜é»‘
2. **å‚æ•°å›ºå®šä¸å˜** - äººç‰©ç§»åŠ¨æ—¶ï¼ŒGUIç•Œé¢é‡Œçš„objectå‚æ•°ä¸€ç›´å›ºå®šä¸å˜
3. **æ•ˆæœä¸å¦‚æ—©æœŸGUI** - æ—©æœŸçš„é¢éƒ¨ã€æ‰‹åŠ¿ã€å§¿åŠ¿è¯†åˆ«GUIæ•ˆæœéƒ½æ­£å¸¸

## é—®é¢˜åˆ†æ

é€šè¿‡åˆ†æä»£ç å‘ç°ä¸»è¦é—®é¢˜ï¼š

### 1. æ‘„åƒå¤´çº¿ç¨‹ç®¡ç†é—®é¢˜
- åŸå§‹`simple_yolos_gui.py`ä½¿ç”¨`self.root.after()`é€’å½’è°ƒç”¨`update_video_stream()`
- æ²¡æœ‰properçš„çº¿ç¨‹åŒæ­¥æœºåˆ¶
- ç¼ºå°‘`is_camera_running`çŠ¶æ€æ§åˆ¶

### 2. æ£€æµ‹å‚æ•°æ›´æ–°é—®é¢˜
- æ£€æµ‹å‡½æ•°ä¸­ä½¿ç”¨å›ºå®šå€¼è€Œä¸æ˜¯å®æ—¶å‚æ•°
- ç¼ºå°‘å‚æ•°å˜åŒ–çš„å“åº”æœºåˆ¶
- æ¨¡æ‹Ÿæ£€æµ‹ç»“æœè¿‡äºé™æ€

### 3. OpenCV GUIå…¼å®¹æ€§é—®é¢˜
- Windowsç¯å¢ƒä¸‹OpenCVçš„`cv2.imshow()`å’Œ`cv2.destroyAllWindows()`å­˜åœ¨å…¼å®¹æ€§é—®é¢˜
- é”™è¯¯ä¿¡æ¯ï¼š`The function is not implemented. Rebuild the library with Windows GTK+ 2.x or Cocoa support`

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä¿®å¤åŸå§‹GUI (å·²å®ç°)
æ–‡ä»¶ï¼š`src/gui/simple_yolos_gui.py`

**ä¸»è¦ä¿®æ”¹ï¼š**
1. æ·»åŠ çº¿ç¨‹å®‰å…¨çš„æ‘„åƒå¤´å¤„ç†
2. å®ç°åŠ¨æ€å‚æ•°æ›´æ–°
3. æ”¹è¿›æ£€æµ‹ç»“æœç¼“å­˜æœºåˆ¶

**å…³é”®æ”¹è¿›ï¼š**
```python
# æ·»åŠ çº¿ç¨‹æ§åˆ¶å˜é‡
self.is_camera_running = False
self.camera_thread = None

# ä½¿ç”¨ç‹¬ç«‹çº¿ç¨‹å¤„ç†æ‘„åƒå¤´
def camera_loop(self):
    while self.is_camera_running:
        # ç¨³å®šçš„æ‘„åƒå¤´è¯»å–é€»è¾‘
        
# åŠ¨æ€å‚æ•°æ›´æ–°
def perform_detection(self, frame):
    conf_threshold = self.conf_var.get()  # å®æ—¶è·å–å‚æ•°
    nms_threshold = self.nms_var.get()
    # ä½¿ç”¨å®æ—¶å‚æ•°è¿›è¡Œæ£€æµ‹
```

### æ–¹æ¡ˆ2: åŸºäºç¨³å®šæ¶æ„çš„æ–°GUI (æ¨è)
æ–‡ä»¶ï¼š`src/gui/hybrid_stable_gui.py`

**è®¾è®¡ç†å¿µï¼š**
- åŸºäº`basic_pet_recognition_gui.py`çš„ç¨³å®šæ‘„åƒå¤´å¤„ç†æ¶æ„
- ç»“åˆTkinterç•Œé¢çš„ç”¨æˆ·å‹å¥½æ€§
- é¿å…OpenCV GUIçš„å…¼å®¹æ€§é—®é¢˜

**æ ¸å¿ƒç‰¹æ€§ï¼š**
1. **ç¨³å®šçš„æ‘„åƒå¤´åˆå§‹åŒ–**
   ```python
   def initialize_camera(self) -> bool:
       # ä¾æ¬¡å°è¯•å¤šä¸ªæ‘„åƒå¤´ç´¢å¼•
       # éªŒè¯æ¯ä¸ªæ‘„åƒå¤´çš„å¯ç”¨æ€§
       # è®¾ç½®åˆé€‚çš„åˆ†è¾¨ç‡å‚æ•°
   ```

2. **çº¿ç¨‹å®‰å…¨çš„è§†é¢‘å¤„ç†**
   ```python
   def camera_loop(self):
       while self.is_camera_running:
           # ç¨³å®šçš„å¸§è¯»å–
           # å¼‚å¸¸å¤„ç†
           # ä¸»çº¿ç¨‹åŒæ­¥æ˜¾ç¤º
   ```

3. **å®æ—¶å‚æ•°å“åº”**
   ```python
   def update_parameters(self, value=None):
       # å®æ—¶æ›´æ–°æ£€æµ‹å™¨å‚æ•°
       # ç•Œé¢æ ‡ç­¾åŒæ­¥æ›´æ–°
   ```

4. **æ™ºèƒ½æ£€æµ‹ç¼“å­˜**
   ```python
   # æ£€æµ‹é—´éš”æ§åˆ¶
   should_detect = (self.frame_count % self.detection_interval == 0)
   # ç»“æœç¼“å­˜ä¿æŒ
   if (self.frame_count - self.result_cache_time) < self.result_hold_frames:
   ```

## æµ‹è¯•ç»“æœ

### æ··åˆç¨³å®šç‰ˆGUIæµ‹è¯•
```bash
cd src/gui && python hybrid_stable_gui.py
```

**æµ‹è¯•ç»“æœï¼š**
- âœ… æ‘„åƒå¤´æˆåŠŸå¯åŠ¨
- âœ… ç•Œé¢æ­£å¸¸æ˜¾ç¤º
- âœ… å‚æ•°å®æ—¶æ›´æ–°
- âœ… æ£€æµ‹ç»“æœåŠ¨æ€å˜åŒ–
- âœ… çº¿ç¨‹å®‰å…¨è¿è¡Œ

**è¾“å‡ºæ—¥å¿—ï¼š**
```
ğŸ¯ YOLOS æ··åˆç¨³å®šç‰ˆç›®æ ‡æ£€æµ‹ç³»ç»Ÿ
ç»“åˆç¨³å®šæ‘„åƒå¤´å¤„ç†å’ŒTkinterç•Œé¢
=============================================
åŠŸèƒ½ç‰¹æ€§:
  ğŸ¥ ç¨³å®šçš„æ‘„åƒå¤´å¤„ç†
  ğŸ–¥ï¸ Tkinterå›¾å½¢ç•Œé¢
  ğŸ¯ å®æ—¶ç›®æ ‡æ£€æµ‹æ¨¡æ‹Ÿ
  âš™ï¸ åŠ¨æ€å‚æ•°è°ƒæ•´
  ğŸ“Š æ€§èƒ½ç›‘æ§

2025-09-11 01:11:38162 - INFO - æ­£åœ¨åˆå§‹åŒ–æ‘„åƒå¤´...
2025-09-11 01:11:38162 - INFO - å°è¯•å†…ç½®æ‘„åƒå¤´ (ç´¢å¼• 0)
2025-09-11 01:11:38433 - INFO - å†…ç½®æ‘„åƒå¤´å¯åŠ¨æˆåŠŸ: (480 640 3)
```

## ä½¿ç”¨å»ºè®®

### æ¨èä½¿ç”¨æ··åˆç¨³å®šç‰ˆGUI
**æ–‡ä»¶ï¼š** `src/gui/hybrid_stable_gui.py`

**ä¼˜åŠ¿ï¼š**
1. **ç¨³å®šæ€§é«˜** - åŸºäºç»è¿‡éªŒè¯çš„æ‘„åƒå¤´å¤„ç†æ¶æ„
2. **å…¼å®¹æ€§å¥½** - é¿å…OpenCV GUIåœ¨Windowsä¸Šçš„é—®é¢˜
3. **åŠŸèƒ½å®Œæ•´** - åŒ…å«æ‰€æœ‰å¿…è¦çš„æ£€æµ‹å’Œæ§åˆ¶åŠŸèƒ½
4. **ç”¨æˆ·å‹å¥½** - Tkinterç•Œé¢æ“ä½œç®€å•ç›´è§‚

**æ“ä½œè¯´æ˜ï¼š**
1. ç‚¹å‡»"å¯åŠ¨æ‘„åƒå¤´"å¼€å§‹è§†é¢‘æµ
2. ç‚¹å‡»"å¼€å§‹æ£€æµ‹"å¯ç”¨ç›®æ ‡æ£€æµ‹
3. æ‹–åŠ¨æ»‘å—å®æ—¶è°ƒæ•´ç½®ä¿¡åº¦å’ŒNMSå‚æ•°
4. è§‚å¯Ÿæ£€æµ‹ç»“æœçš„å®æ—¶å˜åŒ–

### å¤‡ç”¨æ–¹æ¡ˆ
å¦‚æœéœ€è¦ä½¿ç”¨åŸå§‹GUIæ¶æ„ï¼Œå¯ä»¥ä½¿ç”¨ä¿®å¤åçš„ï¼š
**æ–‡ä»¶ï¼š** `src/gui/simple_yolos_gui.py`

## æŠ€æœ¯è¦ç‚¹

### 1. æ‘„åƒå¤´ç¨³å®šæ€§
- å¤šç´¢å¼•å°è¯•æœºåˆ¶
- å¸§è¯»å–éªŒè¯
- å¼‚å¸¸æ¢å¤å¤„ç†

### 2. çº¿ç¨‹å®‰å…¨
- ç‹¬ç«‹æ‘„åƒå¤´çº¿ç¨‹
- ä¸»çº¿ç¨‹UIæ›´æ–°
- èµ„æºæ­£ç¡®é‡Šæ”¾

### 3. å‚æ•°å“åº”æ€§
- å®æ—¶å‚æ•°è·å–
- æ£€æµ‹å™¨å‚æ•°åŒæ­¥
- ç•Œé¢æ ‡ç­¾æ›´æ–°

### 4. æ€§èƒ½ä¼˜åŒ–
- æ£€æµ‹é—´éš”æ§åˆ¶
- ç»“æœç¼“å­˜æœºåˆ¶
- FPSç›‘æ§æ˜¾ç¤º

## æ€»ç»“

é€šè¿‡åˆ†æç”¨æˆ·åé¦ˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬ï¼š

1. **è¯†åˆ«äº†æ ¹æœ¬åŸå› ** - çº¿ç¨‹ç®¡ç†å’Œå‚æ•°æ›´æ–°æœºåˆ¶çš„ç¼ºé™·
2. **å€Ÿé‰´äº†ç¨³å®šæ¶æ„** - åŸºäº`basic_pet_recognition_gui.py`çš„æˆåŠŸç»éªŒ
3. **åˆ›å»ºäº†æ”¹è¿›æ–¹æ¡ˆ** - æ··åˆç¨³å®šç‰ˆGUIè§£å†³äº†æ‰€æœ‰å·²çŸ¥é—®é¢˜
4. **éªŒè¯äº†è§£å†³æ•ˆæœ** - æµ‹è¯•ç¡®è®¤æ‘„åƒå¤´ç¨³å®šè¿è¡Œï¼Œå‚æ•°å®æ—¶å“åº”

**æ¨èä½¿ç”¨ `src/gui/hybrid_stable_gui.py` ä½œä¸ºä¸»è¦GUIç•Œé¢ã€‚**